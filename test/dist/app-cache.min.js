!function(){function t(){this._manifest=this.getManifest(),this._response=[],this._manifest||(this.initManifest(),this._manifest=this.getManifest())}t.VERSION="0.0.2",t.PREFIX="__app_cache__",t.NOOP=function(){},t._instance=null,t.load=function(e,n){return t._instance||(t._instance=new t),t._instance.load(e,n),t._instance},t.diff=function(t,e){return e.filter(function(t){return-1===e.indexOf(t)})},t.prototype={constructor:t,loadQueue:function(e){var n=this,i=this._loadOptions.success||t.NOOP,s=this._loadOptions.error||t.NOOP,o=this._loadFiles[e],a=this._loadFiles.length;n.loadText(o,{success:function(t){var s=t.content,r=t.type,c=r.indexOf("javascript")>-1?"injectScript":"injectStyle";n._response.push(t),n[c](s),n._manifest.files[o]=!0,n.setManifest(n._manifest),n.setStore(o,s),n._response.length===a?i(n._response):n.loadQueue(e+1)},error:s})},load:function(t,e){this._loadFiles=t,this._loadOptions=e||{},this.syncManifest(t),this.loadQueue(0)}},window.AppCache=t}(),function(t){t.prototype.loadFromXHR=function(t,e,n,i){var s=new XMLHttpRequest;s.open("GET",t),s.onreadystatechange=function(){4===s.readyState&&(200===s.status||0===s.status&&s.responseText?e({content:s.responseText,type:s.getResponseHeader("content-type")}):n(s.statusText))},setTimeout(function(){s.readyState<4&&(s.abort(),n(s.statusText))},i),s.send()}}(AppCache),function(t){t.prototype.loadFromCache=function(t,e,n,i){try{var s=t.indexOf("?"),o=-1===s?t:t.slice(0,s);e({content:this.getStore(t),type:"js"===o.slice(-2)?"application/javascript":"text/css"})}catch(t){n(t)}}}(AppCache),function(t){t.prototype.hasLoad=function(t){return this.getManifest().files[t]},t.prototype.loadText=function(e,n){var i=n.timeout||3e4,s=n.success||t.NOOP,o=n.error||t.NOOP;this.hasLoad(e)?this.loadFromCache(e,s,o,i):this.loadFromXHR(e,s,o,i)}}(AppCache),function(t){var e=document.head||document.getElementsByTagName("head")[0];t.injectScript=t.prototype.injectScript=function(t){var n=document.createElement("script");n.defer=!0,n.text=t,e.appendChild(n)}}(AppCache),function(t){var e=document.head||document.getElementsByTagName("head")[0];t.injectStyle=t.prototype.injectStyle=function(t){var n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e.appendChild(n)}}(AppCache),function(t){var e=t.prototype,n=window.localStorage,i=function(t){return"string"==typeof t};e.setStore=function(e,s){var o=t.PREFIX,a=o+e,r=i(s)?s:JSON.stringify(s);n.setItem(a,r)},e.getStore=function(e,i){var s=t.PREFIX,o=s+e,a=n.getItem(o);return"json"===i?JSON.parse(a):a},e.removeStore=function(e){var i=t.PREFIX,s=i+e;n.removeItem(s)},e.clearStore=function(){var e=Object.keys(n),i=t.PREFIX;e.forEach(function(t){0===t.indexOf(i)&&n.removeItem(t)})}}(AppCache),function(t){var e=t.prototype;e.initManifest=function(){this.setStore("manifest",{prefix:t.PREFIX,files:{}})},e.syncManifest=function(e){var n,i,s,o=this._manifest.files,a=Object.keys(o),r=t.diff(e,a),c=t.diff(a,e);for(n=0,i=r.length;n<i;n++)s=r[n],o[s]=!1;for(n=0,i=c.length;n<i;n++)s=c[n],delete o[s],this.removeStore(s);this._manifest.files=o},e.hasManifest=function(){return!!this.getStore("manifest")},e.getManifest=function(){return this.getStore("manifest","json")},e.setManifest=function(t){this.setStore("manifest",t)}}(AppCache);